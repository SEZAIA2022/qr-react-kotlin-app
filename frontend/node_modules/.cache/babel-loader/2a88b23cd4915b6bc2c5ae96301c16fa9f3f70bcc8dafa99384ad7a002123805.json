{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=_ref=>{let{userEmail}=_ref;const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/get_all_user_web\"));if(res.data.status==='success'){setUsers(res.data.users);}else{setError('Error fetching users.');}}catch(err){setError('Network or server error.');}finally{setLoading(false);}};const handleDelete=async id=>{if(!window.confirm('Are you sure you want to delete this user?'))return;try{const res=await axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/delete_user_web/\").concat(id));if(res.data.success){setUsers(users.filter(user=>user.id!==id));}else{alert(res.data.message||'Error deleting user.');}}catch(err){alert('Network or server error.');}};return/*#__PURE__*/_jsxs(\"div\",{style:containerStyle,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Dashboard\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading users...\"}):error?/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}):/*#__PURE__*/_jsxs(\"table\",{style:tableStyle,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Application\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"City\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Country\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"QR Code Count\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map((user,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:index+1}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:user.application}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:user.email}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:user.city||'-'}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:user.country||'-'}),/*#__PURE__*/_jsxs(\"td\",{style:tdStyle,children:[\" \",user.is_activated===1?'Activated':'Not activated'||'-']}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:user.role}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:user.qrcode_count}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:/*#__PURE__*/_jsx(\"button\",{style:deleteBtnStyle,onClick:()=>handleDelete(user.id),children:\"Delete\"})})]},user.id))})]})]});};// Styles\nconst containerStyle={maxWidth:'900px',margin:'40px auto',padding:'20px',backgroundColor:'#eef2ff',borderRadius:'8px',fontFamily:\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\"};const tableStyle={width:'100%',borderCollapse:'collapse',marginTop:'20px'};const thStyle={borderBottom:'2px solid #007bff',textAlign:'left',padding:'10px',backgroundColor:'#d6e0ff'};const tdStyle={borderBottom:'1px solid #ccc',padding:'10px'};const deleteBtnStyle={backgroundColor:'#dc3545',color:'white',border:'none',padding:'6px 10px',borderRadius:'4px',cursor:'pointer'};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","AdminDashboard","_ref","userEmail","users","setUsers","loading","setLoading","error","setError","fetchUsers","res","get","concat","process","env","REACT_APP_API_URL","data","status","err","handleDelete","id","window","confirm","delete","success","filter","user","alert","message","style","containerStyle","children","color","tableStyle","thStyle","map","index","tdStyle","application","email","city","country","is_activated","role","qrcode_count","deleteBtnStyle","onClick","maxWidth","margin","padding","backgroundColor","borderRadius","fontFamily","width","borderCollapse","marginTop","borderBottom","textAlign","border","cursor"],"sources":["/opt/myapp/qr-react-kotlin-app/frontend/src/components/AdminDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst AdminDashboard = ({ userEmail }) => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/get_all_user_web`);\n      if (res.data.status === 'success') {\n        setUsers(res.data.users);\n      } else {\n        setError('Error fetching users.');\n      }\n    } catch (err) {\n      setError('Network or server error.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async (id) => {\n    if (!window.confirm('Are you sure you want to delete this user?')) return;\n\n    try {\n      const res = await axios.delete(`${process.env.REACT_APP_API_URL}/api/delete_user_web/${id}`);\n      if (res.data.success) {\n        setUsers(users.filter(user => user.id !== id));\n      } else {\n        alert(res.data.message || 'Error deleting user.');\n      }\n    } catch (err) {\n      alert('Network or server error.');\n    }\n  };\n\n  return (\n    <div style={containerStyle}>\n      <h1>Admin Dashboard</h1>\n      \n      {loading ? (\n        <p>Loading users...</p>\n      ) : error ? (\n        <p style={{ color: 'red' }}>{error}</p>\n      ) : (\n        <table style={tableStyle}>\n          <thead>\n            <tr>\n              <th style={thStyle}>ID</th>\n              <th style={thStyle}>Application</th>\n              <th style={thStyle}>Email</th>\n              <th style={thStyle}>City</th>\n              <th style={thStyle}>Country</th>\n              <th style={thStyle}>Status</th>\n              <th style={thStyle}>Role</th>\n              <th style={thStyle}>QR Code Count</th>\n              <th style={thStyle}>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {users.map((user, index) => (\n              <tr key={user.id}>\n                <td style={tdStyle}>{index + 1}</td> \n                <td style={tdStyle}>{user.application}</td>\n                <td style={tdStyle}>{user.email}</td>\n                <td style={tdStyle}>{user.city || '-'}</td>\n                <td style={tdStyle}>{user.country || '-'}</td>\n                <td style={tdStyle}> {user.is_activated === 1 ? 'Activated' : 'Not activated' || '-'}</td>\n                <td style={tdStyle}>{user.role}</td>\n                <td style={tdStyle}>{user.qrcode_count}</td>\n                <td style={tdStyle}>\n                  <button \n                    style={deleteBtnStyle} \n                    onClick={() => handleDelete(user.id)}\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};\n\n// Styles\nconst containerStyle = {\n  maxWidth: '900px',\n  margin: '40px auto',\n  padding: '20px',\n  backgroundColor: '#eef2ff',\n  borderRadius: '8px',\n  fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\n};\n\nconst tableStyle = {\n  width: '100%',\n  borderCollapse: 'collapse',\n  marginTop: '20px',\n};\n\nconst thStyle = {\n  borderBottom: '2px solid #007bff',\n  textAlign: 'left',\n  padding: '10px',\n  backgroundColor: '#d6e0ff',\n};\n\nconst tdStyle = {\n  borderBottom: '1px solid #ccc',\n  padding: '10px',\n};\n\nconst deleteBtnStyle = {\n  backgroundColor: '#dc3545',\n  color: 'white',\n  border: 'none',\n  padding: '6px 10px',\n  borderRadius: '4px',\n  cursor: 'pointer',\n};\n\nexport default AdminDashboard;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAmB,IAAlB,CAAEC,SAAU,CAAC,CAAAD,IAAA,CACnC,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACde,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAf,KAAK,CAACgB,GAAG,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,yBAAuB,CAAC,CACpF,GAAIL,GAAG,CAACM,IAAI,CAACC,MAAM,GAAK,SAAS,CAAE,CACjCb,QAAQ,CAACM,GAAG,CAACM,IAAI,CAACb,KAAK,CAAC,CAC1B,CAAC,IAAM,CACLK,QAAQ,CAAC,uBAAuB,CAAC,CACnC,CACF,CAAE,MAAOU,GAAG,CAAE,CACZV,QAAQ,CAAC,0BAA0B,CAAC,CACtC,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAa,YAAY,CAAG,KAAO,CAAAC,EAAE,EAAK,CACjC,GAAI,CAACC,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAC,CAAE,OAEnE,GAAI,CACF,KAAM,CAAAZ,GAAG,CAAG,KAAM,CAAAf,KAAK,CAAC4B,MAAM,IAAAX,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,0BAAAH,MAAA,CAAwBQ,EAAE,CAAE,CAAC,CAC5F,GAAIV,GAAG,CAACM,IAAI,CAACQ,OAAO,CAAE,CACpBpB,QAAQ,CAACD,KAAK,CAACsB,MAAM,CAACC,IAAI,EAAIA,IAAI,CAACN,EAAE,GAAKA,EAAE,CAAC,CAAC,CAChD,CAAC,IAAM,CACLO,KAAK,CAACjB,GAAG,CAACM,IAAI,CAACY,OAAO,EAAI,sBAAsB,CAAC,CACnD,CACF,CAAE,MAAOV,GAAG,CAAE,CACZS,KAAK,CAAC,0BAA0B,CAAC,CACnC,CACF,CAAC,CAED,mBACE5B,KAAA,QAAK8B,KAAK,CAAEC,cAAe,CAAAC,QAAA,eACzBlC,IAAA,OAAAkC,QAAA,CAAI,iBAAe,CAAI,CAAC,CAEvB1B,OAAO,cACNR,IAAA,MAAAkC,QAAA,CAAG,kBAAgB,CAAG,CAAC,CACrBxB,KAAK,cACPV,IAAA,MAAGgC,KAAK,CAAE,CAAEG,KAAK,CAAE,KAAM,CAAE,CAAAD,QAAA,CAAExB,KAAK,CAAI,CAAC,cAEvCR,KAAA,UAAO8B,KAAK,CAAEI,UAAW,CAAAF,QAAA,eACvBlC,IAAA,UAAAkC,QAAA,cACEhC,KAAA,OAAAgC,QAAA,eACElC,IAAA,OAAIgC,KAAK,CAAEK,OAAQ,CAAAH,QAAA,CAAC,IAAE,CAAI,CAAC,cAC3BlC,IAAA,OAAIgC,KAAK,CAAEK,OAAQ,CAAAH,QAAA,CAAC,aAAW,CAAI,CAAC,cACpClC,IAAA,OAAIgC,KAAK,CAAEK,OAAQ,CAAAH,QAAA,CAAC,OAAK,CAAI,CAAC,cAC9BlC,IAAA,OAAIgC,KAAK,CAAEK,OAAQ,CAAAH,QAAA,CAAC,MAAI,CAAI,CAAC,cAC7BlC,IAAA,OAAIgC,KAAK,CAAEK,OAAQ,CAAAH,QAAA,CAAC,SAAO,CAAI,CAAC,cAChClC,IAAA,OAAIgC,KAAK,CAAEK,OAAQ,CAAAH,QAAA,CAAC,QAAM,CAAI,CAAC,cAC/BlC,IAAA,OAAIgC,KAAK,CAAEK,OAAQ,CAAAH,QAAA,CAAC,MAAI,CAAI,CAAC,cAC7BlC,IAAA,OAAIgC,KAAK,CAAEK,OAAQ,CAAAH,QAAA,CAAC,eAAa,CAAI,CAAC,cACtClC,IAAA,OAAIgC,KAAK,CAAEK,OAAQ,CAAAH,QAAA,CAAC,SAAO,CAAI,CAAC,EAC9B,CAAC,CACA,CAAC,cACRlC,IAAA,UAAAkC,QAAA,CACG5B,KAAK,CAACgC,GAAG,CAAC,CAACT,IAAI,CAAEU,KAAK,gBACrBrC,KAAA,OAAAgC,QAAA,eACElC,IAAA,OAAIgC,KAAK,CAAEQ,OAAQ,CAAAN,QAAA,CAAEK,KAAK,CAAG,CAAC,CAAK,CAAC,cACpCvC,IAAA,OAAIgC,KAAK,CAAEQ,OAAQ,CAAAN,QAAA,CAAEL,IAAI,CAACY,WAAW,CAAK,CAAC,cAC3CzC,IAAA,OAAIgC,KAAK,CAAEQ,OAAQ,CAAAN,QAAA,CAAEL,IAAI,CAACa,KAAK,CAAK,CAAC,cACrC1C,IAAA,OAAIgC,KAAK,CAAEQ,OAAQ,CAAAN,QAAA,CAAEL,IAAI,CAACc,IAAI,EAAI,GAAG,CAAK,CAAC,cAC3C3C,IAAA,OAAIgC,KAAK,CAAEQ,OAAQ,CAAAN,QAAA,CAAEL,IAAI,CAACe,OAAO,EAAI,GAAG,CAAK,CAAC,cAC9C1C,KAAA,OAAI8B,KAAK,CAAEQ,OAAQ,CAAAN,QAAA,EAAC,GAAC,CAACL,IAAI,CAACgB,YAAY,GAAK,CAAC,CAAG,WAAW,CAAG,eAAe,EAAI,GAAG,EAAK,CAAC,cAC1F7C,IAAA,OAAIgC,KAAK,CAAEQ,OAAQ,CAAAN,QAAA,CAAEL,IAAI,CAACiB,IAAI,CAAK,CAAC,cACpC9C,IAAA,OAAIgC,KAAK,CAAEQ,OAAQ,CAAAN,QAAA,CAAEL,IAAI,CAACkB,YAAY,CAAK,CAAC,cAC5C/C,IAAA,OAAIgC,KAAK,CAAEQ,OAAQ,CAAAN,QAAA,cACjBlC,IAAA,WACEgC,KAAK,CAAEgB,cAAe,CACtBC,OAAO,CAAEA,CAAA,GAAM3B,YAAY,CAACO,IAAI,CAACN,EAAE,CAAE,CAAAW,QAAA,CACtC,QAED,CAAQ,CAAC,CACP,CAAC,GAhBEL,IAAI,CAACN,EAiBV,CACL,CAAC,CACG,CAAC,EACH,CACR,EACE,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAAU,cAAc,CAAG,CACrBiB,QAAQ,CAAE,OAAO,CACjBC,MAAM,CAAE,WAAW,CACnBC,OAAO,CAAE,MAAM,CACfC,eAAe,CAAE,SAAS,CAC1BC,YAAY,CAAE,KAAK,CACnBC,UAAU,CAAE,iDACd,CAAC,CAED,KAAM,CAAAnB,UAAU,CAAG,CACjBoB,KAAK,CAAE,MAAM,CACbC,cAAc,CAAE,UAAU,CAC1BC,SAAS,CAAE,MACb,CAAC,CAED,KAAM,CAAArB,OAAO,CAAG,CACdsB,YAAY,CAAE,mBAAmB,CACjCC,SAAS,CAAE,MAAM,CACjBR,OAAO,CAAE,MAAM,CACfC,eAAe,CAAE,SACnB,CAAC,CAED,KAAM,CAAAb,OAAO,CAAG,CACdmB,YAAY,CAAE,gBAAgB,CAC9BP,OAAO,CAAE,MACX,CAAC,CAED,KAAM,CAAAJ,cAAc,CAAG,CACrBK,eAAe,CAAE,SAAS,CAC1BlB,KAAK,CAAE,OAAO,CACd0B,MAAM,CAAE,MAAM,CACdT,OAAO,CAAE,UAAU,CACnBE,YAAY,CAAE,KAAK,CACnBQ,MAAM,CAAE,SACV,CAAC,CAED,cAAe,CAAA3D,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}